<!doctype html>
<html>
<head>
<title>Get a Passphrase - Generator for Strong Passphrases</title>
<link href="css/generate.css" rel="stylesheet" type="text/css" />
</head>
<body>
<section>
<header>
<h1>Get a Passphrase</h1>
<p>Cryptographically Secure Passphrase Generator</p>
</header>
<ol>
<li>Verify that the connection is secure.</li>
<li>
<div id="options">
<button id="refreshPassphrases">New Passphrases</button>

<h3>Get a random passphrase:</h3>
<!-- Text input fields and labels will be generated here -->
</div>
</li>
<li>Visualize the scene described by the phrase</li>
<li>Practice typing the phrase
<input class="practice" type="text">
<input class="practice" type="text">
</li>
</ol>
</section>

<section>
<h2>How does it work?</h2>
<p>
This website randomly selects words from predefined lists and arranges them into meaningful sentences.
These passphrases are millions of times stronger than most humanly-generated passwords, but reasonably easy to memorize, making them ideal for protecting your most important accounts.
</p>
</section>
<footer></footer>
<script src="js/passphrasegenerator.js?v=20180129"></script>
<script>
"use strict";

document.addEventListener('DOMContentLoaded', function() {
  const optionsContainer = document.getElementById('options');
  const grammars = passphraseGenerator.getGrammars();
  const bitsOptions = Object.keys(grammars);
  bitsOptions.forEach(function(bits) {
    let label = document.createElement('label');
    label.htmlFor = 'bit-' + bits;
    label.textContent = bits + ' bit passphrase:';
    optionsContainer.appendChild(label);

    let div = document.createElement('div');
    div.id = 'bit-' + bits;
    div.dataset.bits = bits; // Store bits in a data attribute
    div.style.whiteSpace = 'pre-wrap'; // Ensures that whitespace and line breaks are preserved
    div.className = 'passphrase-output'; // You can style it using CSS
    optionsContainer.appendChild(div);
    optionsContainer.appendChild(document.createElement('br'));
    
    generateAndDisplayPassphrase(bits, div);
  });

});

let generateAndDisplayPassphrase = function(bits, displayElement) {
  let response = passphraseGenerator.getPassphrase(bits);
  if (response.status === "ok") {
    displayElement.textContent = response.message; // Automatically fill the div with the passphrase
  } else {
    displayElement.textContent = "Error: " + response.message; // Display error if passphrase generation fails
  }
};

document.getElementById('refreshPassphrases').addEventListener('click', function() {
  document.querySelectorAll('.passphrase-output').forEach(div => {
    const bits = div.dataset.bits;
    if (bits) { // Check if the div has the 'bits' data attribute
      generateAndDisplayPassphrase(bits, div);
    }
  });
});

</script>
</body>
</html>
