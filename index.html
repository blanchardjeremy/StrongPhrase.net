<!doctype html>
<html>
<head>
<title>Get a Passphrase - Generator for Strong Passphrases</title>
<link href="css/generate.css" rel="stylesheet" type="text/css" />
</head>
<body>
<section>
  <header>
  <h1>Get a Passphrase</h1>
  <p>Cryptographically Secure Passphrase Generator</p>
  </header>

  <div id="options">
    <h3>Get a random passphrase:</h3>
    <button id="refreshPassphrases"> ‚ôªÔ∏è Refresh!</button>
    <!-- Text input fields and labels will be generated here -->
  </div>

  <div>
    Practice typing the phrase
    <input class="practice" type="text">
  </div>
</section>

<section>
<h2>How does it work?</h2>
<p>
This website randomly selects words from predefined lists and arranges them into meaningful sentences.
These passphrases are millions of times stronger than most humanly-generated passwords, but reasonably easy to memorize, making them ideal for protecting your most important accounts.
</p>
</section>
<footer></footer>
<script src="js/passphrasegenerator.js?v=20180129"></script>
<script>
"use strict";
document.addEventListener('DOMContentLoaded', function() {
  const optionsContainer = document.getElementById('options');
  const grammars = passphraseGenerator.getGrammars();
  const bitsOptions = Object.keys(grammars);
  bitsOptions.forEach(function(bits) {
    let container = document.createElement('div');
    container.className = 'passphrase-container';
    optionsContainer.appendChild(container);

    let label = document.createElement('label');
    label.textContent = bits + ' bits:';
    container.appendChild(label);

    let passphraseDiv = document.createElement('div');
    passphraseDiv.className = 'passphrase-output';
    passphraseDiv.dataset.bits = bits; // Ensure data-bits is set here
    container.appendChild(passphraseDiv);

    let copyBtn = document.createElement('button');
    copyBtn.textContent = 'üìã Copy';
    copyBtn.className = 'copy-button';
    copyBtn.onclick = function() {
        // Remove 'copied' class from all passphrase outputs
        document.querySelectorAll('.passphrase-output.copied').forEach(div => {
            div.classList.remove('copied');
        });

        // Add 'copied' class to the current passphrase output
        passphraseDiv.classList.add('copied');

        navigator.clipboard.writeText(passphraseDiv.textContent).then(() => {
            copyBtn.textContent = '‚úÖ Copied';
            setTimeout(() => {
                copyBtn.textContent = 'üìã Copy';
            }, 3000);
        }, () => {
            copyBtn.textContent = '‚ùå Failed';
            setTimeout(() => {
                copyBtn.textContent = 'üìã Copy';
            }, 3000);
        });
    };
    container.appendChild(copyBtn);

    generateAndDisplayPassphrase(bits, passphraseDiv); // Assuming this function exists and sets the initial passphrase text
  });
});




let generateAndDisplayPassphrase = function(bits, displayElement) {
  let response = passphraseGenerator.getPassphrase(bits);
  if (response.status === "ok") {
    displayElement.textContent = response.message;
  } else {
    displayElement.textContent = "Error: " + response.message;
  }
};

document.getElementById('refreshPassphrases').addEventListener('click', function() {
  // Selecting all passphrase divs instead of input fields
  document.querySelectorAll('.passphrase-output').forEach(passphraseDiv => {
    const bits = passphraseDiv.dataset.bits;
    if (bits) { // Check if the div has the 'bits' data attribute
      generateAndDisplayPassphrase(bits, passphraseDiv);
    }
  });
});



</script>
</body>
</html>
